<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Morph Visualization Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .morph-example {
            background: #f8f9fa;
            padding: 10px;
            margin: 10px 0;
            border-left: 4px solid #007bff;
        }
        .compound-node {
            background: #f8fafc;
            border: 2px dashed #cbd5e1;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            position: relative;
        }
        .compound-node.basic {
            background: #f3f4f6;
            border-color: #2563eb;
        }
        .compound-node.ionized {
            background: #d1fae5;
            border-color: #059669;
        }
        .compound-node.isotopic {
            background: #fef3c7;
            border-color: #92400e;
        }
        .node-label {
            font-weight: bold;
            font-size: 14px;
            text-align: center;
            margin-bottom: 10px;
        }
        .morph-indicator {
            font-size: 12px;
            color: #666;
            text-align: center;
            font-style: italic;
        }
        .attribute-child {
            background: #fef3c7;
            border: 1px solid #92400e;
            padding: 8px;
            margin: 5px;
            border-radius: 3px;
            font-size: 12px;
            display: inline-block;
        }
        .transition-node {
            background: #dbeafe;
            border: 2px solid #1e40af;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            text-align: center;
            font-weight: bold;
            color: #1e40af;
            shape: diamond;
        }
        .edge {
            border-top: 2px solid #1e40af;
            margin: 5px 0;
            position: relative;
        }
        .edge-label {
            background: #dbeafe;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 10px;
            position: absolute;
            top: -8px;
            left: 50%;
            transform: translateX(-50%);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ Morph Visualization Test</h1>
        <p>This test demonstrates how compound nodes now show the current morph state with improved visual indicators.</p>

        <div class="test-section">
            <h2>üìä Compound Node Examples</h2>
            
            <h3>Basic Morph (Original State)</h3>
            <div class="compound-node basic">
                <div class="node-label">oxygen</div>
                <div class="morph-indicator">[Basic morph]</div>
                <div>
                    <span class="attribute-child">8 protons</span>
                    <span class="attribute-child">8 electrons</span>
                    <span class="attribute-child">8 neutrons</span>
                </div>
            </div>

            <h3>Ionized Morph (After Transition)</h3>
            <div class="compound-node ionized">
                <div class="node-label">oxygen<br>[ionized]</div>
                <div class="morph-indicator">[Ionized morph - active]</div>
                <div>
                    <span class="attribute-child">8 protons</span>
                    <span class="attribute-child">7 electrons</span>
                    <span class="attribute-child">8 neutrons</span>
                    <span class="attribute-child">+1 charge</span>
                </div>
            </div>

            <h3>Isotopic Morph (After Transition)</h3>
            <div class="compound-node isotopic">
                <div class="node-label">oxygen<br>[isotopic]</div>
                <div class="morph-indicator">[Isotopic morph - active]</div>
                <div>
                    <span class="attribute-child">8 protons</span>
                    <span class="attribute-child">8 electrons</span>
                    <span class="attribute-child">10 neutrons</span>
                    <span class="attribute-child">mass: 18</span>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>üîÑ Transition Visualization</h2>
            
            <div class="morph-example">
                <h4>Before Transition:</h4>
                <div class="compound-node basic">
                    <div class="node-label">oxygen</div>
                    <div class="morph-indicator">[Basic morph]</div>
                </div>
                
                <div class="edge">
                    <div class="edge-label">from basic</div>
                </div>
                
                <div class="transition-node">ionization</div>
                
                <div class="edge">
                    <div class="edge-label">to ionized</div>
                </div>
                
                <div class="compound-node ionized">
                    <div class="node-label">oxygen<br>[ionized]</div>
                    <div class="morph-indicator">[Ionized morph - active]</div>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>üé® Visual Indicators</h2>
            <ul>
                <li><strong>Basic morph:</strong> Light gray background, blue border</li>
                <li><strong>Active morph:</strong> Colored background matching morph type, thicker border</li>
                <li><strong>Compound nodes:</strong> Show original name + [morph name] for non-basic morphs</li>
                <li><strong>Attribute children:</strong> Grouped within compound nodes with distinct styling</li>
                <li><strong>Transition nodes:</strong> Diamond shape, blue styling</li>
            </ul>
        </div>

        <div class="test-section">
            <h2>‚úÖ Improvements Made</h2>
            <ol>
                <li><strong>Compound node labels:</strong> Now show current morph state in brackets</li>
                <li><strong>Visual morph indicators:</strong> Different colors and border styles for active morphs</li>
                <li><strong>Enhanced success messages:</strong> Show which nodes changed and to what morphs</li>
                <li><strong>Better grouping:</strong> Attributes are visually grouped within their parent nodes</li>
                <li><strong>Clear transitions:</strong> Input/output edges show morph-specific labels</li>
            </ol>
        </div>

        <div class="test-section">
            <h2>üß™ How to Test</h2>
            <ol>
                <li>Start the backend: <code>./start_backend.sh</code></li>
                <li>Start the frontend: <code>cd frontend && npm run dev</code></li>
                <li>Navigate to a graph with transitions (like the oxygen example)</li>
                <li>Click on a transition node to execute it</li>
                <li>Observe how the compound nodes change their labels and styling</li>
                <li>Check the success message showing which nodes changed morphs</li>
                <li>Use the "Reset Simulation" button to return to original state</li>
            </ol>
        </div>

        <div class="test-section">
            <h2>üîç Key Features</h2>
            <ul>
                <li><strong>In-memory transitions:</strong> No database changes, pure simulation</li>
                <li><strong>Visual feedback:</strong> Clear indication of morph changes</li>
                <li><strong>Compound grouping:</strong> Attributes grouped with their parent nodes</li>
                <li><strong>Reversible:</strong> Reset button to return to original state</li>
                <li><strong>Detailed logging:</strong> Success messages show exactly what changed</li>
            </ul>
        </div>
    </div>
</body>
</html> 